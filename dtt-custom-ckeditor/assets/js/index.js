import{d as D,r as m,w as Q,c as r,e as h,R as d,h as u,U as E,g as v,O as j,S as C,H as Z,Z as O,q as A,P as S,af as G,W as J,aj as T}from"./@vue.js";import{P as $,B as ee,C as te,a as oe,E as le,F as ne,b as ae,c as se,d as re,I as ie,U as ce,A as de,e as ue,L as pe,f as me,_ as fe}from"./@ckeditor.js";import{S as ge}from"./blocksdk.js";import{E as Ae,a as H,b as he,c as be,d as ve,v as Ce,e as _e,f as ye,g as xe}from"./element-plus.js";import{F as q,i as R}from"./@fortawesome.js";import{a as Fe}from"./axios.js";import"./lodash-es.js";import"./color-name.js";import"./color-convert.js";import"./color-parse.js";import"./vanilla-colorful.js";import"./@vueuse.js";import"./@element-plus.js";import"./@ctrl.js";import"./async-validator.js";import"./@popperjs.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();const Ee={class:"dialog-header"},we=["textContent"],Ie=["src"],Ve={class:"dialog-footer"},Be=["textContent"],ke=["textContent"],je=D({__name:"index",props:{config:{type:Object,required:!0},visible:{type:Boolean,required:!0},cancelFunction:Function,confirmFunction:Function},setup(t){const e=t,o=m(e.visible),s=()=>{o.value=!1};Q(()=>e.visible,i=>{o.value=i});const n=()=>{e.cancelFunction?e.cancelFunction():o.value=!1},l=()=>{e.confirmFunction?e.confirmFunction():o.value=!1};return(i,b)=>{const _=H,f=Ae;return r(),h(f,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=c=>o.value=c),width:"589","before-close":s,class:"custom-dialog"},{header:d(()=>[u("div",Ee,[u("span",{textContent:E(t.config.header.txt)},null,8,we),t.config.header.img?(r(),v("img",{key:0,src:t.config.header.img},null,8,Ie)):j("",!0)])]),footer:d(()=>[u("div",Ve,[C(_,{class:"dialog-cancel",onClick:n},{default:d(()=>[u("span",{textContent:E(t.config.footer.cancel)},null,8,Be)]),_:1}),C(_,{class:"dialog-confirm",onClick:l},{default:d(()=>[u("span",{textContent:E(t.config.footer.confirm)},null,8,ke)]),_:1})])]),default:d(()=>[u("div",null,[Z(i.$slots,"default",{},void 0,!0)])]),_:3},8,["modelValue"])}}}),X=(t,e)=>{const o=t.__vccOpts||t;for(const[s,n]of e)o[s]=n;return o},De=X(je,[["__scopeId","data-v-b05d89c3"]]),Le="data:image/png;base64,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",Se={header:{txt:"Content Generator",img:Le},generator:"Generate",footer:{cancel:"Cancel",confirm:m("Generate")}},Ge={items:[{field:"Brand_Voice",label:"Select Your Brand Voice",type:"select",options:[{label:"Deloitte Digital",value:"Deloitte Digital"}],required:!0},{field:"Topic",label:"Input Your Topic",type:"textarea",maxlength:200,required:!0},{field:"Desired_Sample_Format",label:"Input Your Desired Sample Format",type:"textarea",maxlength:500,required:!0}],rules:{Brand_Voice:[{required:!0,message:"Please select your Brand Voice",trigger:"change"}],Topic:[{required:!0,message:"Please input your Topic",trigger:"blur"}],Desired_Sample_Format:[{required:!0,message:"Please input your Desired sample format",trigger:"blur"}]}},F={genAIConfig:Se,formConfig:Ge},K=Fe.create({baseURL:"https://sfmc-journey-poc-app-f8hcc0c4dcfphyfw.eastasia-01.azurewebsites.net",timeout:3e4});K.interceptors.request.use(t=>t,t=>{console.log(t),Promise.reject(t)});K.interceptors.response.use(t=>t.data,t=>(console.log(t),Promise.reject(t)));function Te(t){let e={model:"gpt-4o-mini",messages:[{role:"user",content:[]}]};for(let o in t)e.messages[0].content.push({type:"text",text:`${o}:${t[o]}`});return e.messages[0].content.push({type:"text",text:"generate 3 results"}),K({url:"chat/completions",method:"post",data:e})}const Ke={class:"custom-form-item-label"},Me=["textContent"],Ne={key:0,class:"custom-content",style:{"margin-top":"30px","text-align":"right"}},Oe=["textContent"],qe=["textContent"],Re={class:"custom-form-item-label"},ze={class:"custom-text-select",style:{height:"194px",width:"100%"}},Pe=["textContent"],Qe=D({__name:"index",props:{model:Object,writer:Object},setup(t){const e=t,o=m(!0),s=m(),n=O(F.formConfig.rules),l=O({}),i=m(!1),b=m(!1),_=m(null),f=m([]),c=()=>{o.value=!1},y=()=>{s.value.validate(w=>{w&&(b.value=!0,i.value=!0,Te(l).then(g=>{let x=g.choices[0].message.content,V=x.match(/(\d+\.\s)((?!\\n\\n).)*/g);if(V!=null)for(let B in V)f.value[B]=V[B].match(/(\d+\.\s)((.)*)/)[2];else i.value=!1,he({message:x,type:"error",duration:5e3});b.value=!1}))})},L=()=>{if(!i.value)y(),F.genAIConfig.footer.confirm.value="Apply";else{let w=e.writer.createText(_.value);e.model.insertContent(w),o.value=!1,i.value=!1,F.genAIConfig.footer.confirm.value="Generate"}},U=w=>{let g=w.target;Array.from(g.parentNode.children).forEach(x=>{x!=g&&x.classList.remove("is-selected")}),g.classList.add("is-selected"),_.value=g.textContent};return(w,g)=>{const x=_e,V=ye,B=xe,M=be,N=H,W=ve,Y=Ce;return r(),v("div",null,[C(De,{visible:o.value,config:A(F).genAIConfig,cancelFunction:c,confirmFunction:L},{default:d(()=>[C(W,{ref_key:"formRef",ref:s,model:l,rules:n,"label-position":"top","require-asterisk-position":"right"},{default:d(()=>[(r(!0),v(S,null,G(A(F).formConfig.items,a=>(r(),h(M,{key:a.field,prop:a.required?a.field:void 0},{label:d(()=>[u("div",Ke,[u("label",{textContent:E(a.label)},null,8,Me),C(A(q),{class:"custom-vetor",icon:A(R).faQuestion},null,8,["icon"])])]),default:d(()=>[a.type=="select"?(r(),h(V,{key:0,modelValue:l[a.field],"onUpdate:modelValue":p=>l[a.field]=p,placeholder:a.placeholder?a.placeholder:"","popper-class":"custom-select"},{default:d(()=>[(r(!0),v(S,null,G(a.options,p=>(r(),h(x,{key:p.value,label:p.label,value:p.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):a.type=="input"?(r(),h(B,{key:1,modelValue:l[a.field],"onUpdate:modelValue":p=>l[a.field]=p,placeholder:a.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):a.type=="textarea"?(r(),h(B,{key:2,modelValue:l[a.field],"onUpdate:modelValue":p=>l[a.field]=p,placeholder:a.placeholder,maxlength:a.maxlength,"show-word-limit":"",type:"textarea",autosize:{minRows:2,maxRows:6}},null,8,["modelValue","onUpdate:modelValue","placeholder","maxlength"])):j("",!0)]),_:2},1032,["prop"]))),128)),i.value?(r(),v("div",Ne,[C(N,{class:"dialog-cancel",onClick:c},{default:d(()=>[u("span",{textContent:E(A(F).genAIConfig.footer.cancel)},null,8,Oe)]),_:1}),C(N,{class:"dialog-confirm",onClick:y},{default:d(()=>[u("span",{textContent:E(A(F).genAIConfig.generator)},null,8,qe)]),_:1})])):j("",!0),i.value?(r(),h(M,{key:1},{label:d(()=>[u("div",Re,[g[0]||(g[0]=u("label",null," AI Editor Results",-1)),C(A(q),{class:"custom-vetor",icon:A(R).faQuestion},null,8,["icon"])])]),default:d(()=>[J((r(),v("div",ze,[(r(!0),v(S,null,G(f.value,(a,p)=>(r(),v("span",{class:"custom-text-select-option",key:p,textContent:E(a),onClick:U},null,8,Pe))),128))])),[[Y,b.value]])]),_:1})):j("",!0)]),_:1},8,["model","rules"])]),_:1},8,["visible","config"])])}}}),z=X(Qe,[["__scopeId","data-v-b15ec66c"]]);let I=null,k=null;class He extends ${static get pluginName(){return"GenAI"}init(){const e=this.editor;e.ui.componentFactory.add("genAI",o=>{const s=new ee(o);return s.set({label:"GenAI",tooltip:!0,withText:!0}),s.on("execute",()=>{e.model.change(n=>{this.showCustomDialog(e.model,n)})}),s})}showCustomDialog(e,o){k||(k=document.createElement("div"),document.body.appendChild(k)),I?(I.unmount(),I=T(z,{model:e,writer:o}),I.mount(k)):(I=T(z,{model:e,writer:o}),I.mount(k))}}const P=`<!-- START OF CONTENT -->
<div style="break-before:page;">
  <table width="100%" cellspacing="0" cellpadding="0" border="0" bgcolor="#FFFFFF">
    <tr>
      <td align="center">
        <table class="mobile-width-100-percent" style="width:640px;" width="640" cellspacing="0" cellpadding="0"
          border="0" align="center">
          <tr>
            <td class="mobile-width-padding-16"
              style="color:#312A29; font-family: %%=v(@main_story_body_font_family)=%%; font-size: %%=v(@main_story_body_font_size)=%%; line-height: %%=v(@main_story_body_line_height)=%%; padding: 20px 20px 0px 20px;"
              valign="top" bgcolor="#FFFFFF" align="left">
              <table data-template-role="content-table" class="mobile-width-100-percent" width="100%" cellspacing="0"
                cellpadding="0" border="0">
                <tr>
                  <td class="link_8E6919"
                    style="color:#312A29; font-family: %%=v(@main_story_body_font_family)=%%; font-size: %%=v(@main_story_body_font_size)=%%; line-height: %%=v(@main_story_body_line_height)=%%;"
                    valign="top" align="left">
                    <div class="editable-area" data-editor-id="1"
                      data-toolbar-buttons="text-basic,cta,signature,side-logo" data-hyperlink-default-color="#8E6919">
                      <p>Insert main copy</p>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td style="font-size: 30px; line-height: 30px;" height="30"></td>
                </tr>
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</div><!-- END OF CONTENT -->`,Xe=D({__name:"ckeditor_content",setup(t){let e=null,o=null,s=null;const n=m(te),l=m(""),i=m({plugins:[oe,le,ne,ae,se,re,ie,ce,de,ue,pe,me,He],fontFamily:{supportAllValues:!0,options:["Arial","Georgia","Garamond"]},fontSize:{supportAllValues:!0,options:[10,11,12,13,14,15,16,17,18,20,21,24,28,32,38,42,44,46,48]},fontColor:{columns:6,documentColors:6,colors:[{color:"#B47E27",label:"B47E27"},{color:"#716C5E",label:"716C5E"},{color:"#FEFEFE",label:"FEFEFE"},{color:"#FA5900",label:"FA5900"},{color:"#BCBEC0",label:"BCBEC0"},{color:"#073C4A",label:"073C4A"},{color:"#AF290A",label:"AF290A"}]},toolbar:["fontFamily","fontSize","fontcolor","|","bold","italic","underline","|","alignment:left","alignment:center","alignment:right","alignment:justify","|","findandreplace","|","bulletedList","numberedList","|","undo","redo","|","link","genAI"]});function b(f){o=new DOMParser().parseFromString(f,"text/html"),s=o.getElementsByClassName("editable-area"),Array.from(s).forEach((y,L)=>{y instanceof HTMLElement&&y.setAttribute("data-editor-id",L+1)}),l.value=s[0].innerHTML}function _(f){e=new ge({blockEditorWidth:900,tabs:["htmlblock"]}),e.getContent(c=>{(!c||c.length==0)&&(c=P,e.setContent(P)),b(c)})}return Q(l,(f,c)=>{s&&(s[0].innerHTML=f,e.setContent(o.body.innerHTML))}),(f,c)=>(r(),h(A(fe),{editor:n.value,config:i.value,modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=y=>l.value=y),onReady:_},null,8,["editor","config","modelValue"]))}}),Ue=D({__name:"App",setup(t){return(e,o)=>(r(),h(Xe))}}),We=T(Ue);We.mount("#app");
