function l(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var n={exports:{}},c;function u(){return c||(c=1,function(o){var a=function(e,t,s){Array.isArray(e)&&(t=e,s=t,e=void 0),e&&e.onEditClose&&(this.handlers={onEditClose:e.onEditClose},e.onEditClose=!0),this._whitelistOverride=t,this._sslOverride=s,this._messageId=1,this._messages={0:function(){}},this._readyToPost=!1,this._pendingMessages=[],this._receiveMessage=this._receiveMessage.bind(this),window.addEventListener("message",this._receiveMessage,!1),window.parent.postMessage({method:"handShake",origin:window.location.origin,payload:e},"*")};a.prototype.execute=function(t,s){s=s||{};var i=s.data,r=s.success;this._readyToPost?this._post({method:t,payload:i},r):this._pendingMessages.push({method:t,payload:i,callback:r})},a.prototype.getCentralData=function(e){this.execute("getCentralData",{success:e})},a.prototype.getContent=function(e){this.execute("getContent",{success:e})},a.prototype.getData=function(e){this.execute("getData",{success:e})},a.prototype.getUserData=function(e){this.execute("getUserData",{success:e})},a.prototype.getView=function(e){this.execute("getView",{success:e})},a.prototype.setBlockEditorWidth=function(e,t){this.execute("setBlockEditorWidth",{data:e,success:t})},a.prototype.setCentralData=function(e,t){this.execute("setCentralData",{data:e,success:t})},a.prototype.setContent=function(e,t){this.execute("setContent",{data:e,success:t})},a.prototype.setData=function(e,t){this.execute("setData",{data:e,success:t})},a.prototype.setSuperContent=function(e,t){this.execute("setSuperContent",{data:e,success:t})},a.prototype.triggerAuth=function(e){this.getUserData(function(t){var s=t.stack;s.indexOf("qa")===0&&(s=s.substring(3,5)+"."+s.substring(0,3));var i=document.createElement("IFRAME");i.src="https://mc."+s+".exacttarget.com/cloud/tools/SSO.aspx?appId="+e+"&restToken=1&hub=1",i.style.width="1px",i.style.height="1px",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.visibility="hidden",i.className="authframe",document.body.appendChild(i)})},a.prototype.triggerAuth2=function(e){var t=document.createElement("IFRAME"),s="",i="";Array.isArray(e.scope)&&(s="&scope="+e.scope.join("%20")),e.state&&(i="&state="+e.state),t.src=e.authURL+(e.authURL.endsWith("/")?"":"/")+"v2/authorize?response_type=code&client_id="+e.clientId+"&redirect_uri="+encodeURIComponent(e.redirectURL)+s+i,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.visibility="hidden",t.className="authframe",document.body.appendChild(t)},a.prototype._executePendingMessages=function(){var t=this;this._pendingMessages.forEach(function(s){t.execute(s.method,{data:s.payload,success:s.callback})}),this._pendingMessages=[]},a.prototype._post=function(t,s){this._messages[this._messageId]=s,t.id=this._messageId,this._messageId+=1,window.parent.postMessage(t,this._parentOrigin)},a.prototype._receiveMessage=function(t){t=t||{};var s=t.data||{};if(s.method==="handShake"){if(this._validateOrigin(s.origin)){this._parentOrigin=s.origin,this._readyToPost=!0,this._executePendingMessages();return}}else if(s.method==="closeBlock"&&this._validateOrigin(s.origin)){this.handlers&&this.handlers.onEditClose&&this.handlers.onEditClose(),this.execute("blockReadyToClose");return}!this._parentOrigin||this._parentOrigin!==t.origin||((this._messages[s.id||0]||function(){})(s.payload),delete this._messages[s.id])},a.prototype._validateOrigin=function(t){for(var s=this._whitelistOverride||["exacttarget\\.com","marketingcloudapps\\.com","blocktester\\.herokuapp\\.com"],i=0;i<s.length;i++){var r=this._sslOverride?"?":"",d=s[i]==="exacttarget\\.com"?"mc\\.":"",p=new RegExp("^https"+r+"://"+d+"([a-zA-Z0-9-]+\\.)*"+s[i]+"(:[0-9]+)?$","i");if(p.test(t))return!0}return!1},typeof window=="object"&&(window.sfdc=window.sfdc||{},window.sfdc.BlockSDK=a),o.exports=a}(n)),n.exports}var h=u();const g=l(h);export{g as S,l as g};
